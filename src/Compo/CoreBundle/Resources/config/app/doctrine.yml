doctrine:
    dbal:
        default_connection: default
        connections:
            default:
                driver:   "%database_driver%"
                dbname:   "%database_name%"
                user:     "%database_user%"
                host:     "%database_host%"
                port:     "%database_port%"
                password: "%database_password%"
                charset:  UTF8

                # TODO: Выяснить, нахрена указана версия
                server_version: 5.6

                # TODO: Выяснить, может уже и не нужно
                mapping_types:
                    enum:       string
        types:
            json:     Sonata\Doctrine\Types\JsonType

    orm:
        auto_generate_proxy_classes: '%kernel.debug%'
        default_entity_manager: default
        entity_managers:
            default:
                auto_mapping: true
                naming_strategy: doctrine.orm.naming_strategy.underscore
                mappings: ~
                query_cache_driver:
                    type:                 "%cache_driver%"
                    namespace: "%database_name%"
                metadata_cache_driver:
                    type:                 "%cache_driver%"
                    namespace: "%database_name%"
                result_cache_driver:
                    type:                 "%cache_driver%"
                    namespace: "%database_name%"
                dql:
                    numeric_functions:
                        rand: DoctrineExtensions\Query\Mysql\Rand

                # TODO: Может заменить на свой? Или трейты...
                default_repository_class:  Doctrine\ORM\EntityRepository

                mappings:
                    gedmo_translatable:
                        type: annotation
                        prefix: Gedmo\Translatable\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Translatable/Entity"
                        alias: GedmoTranslatable # (optional) it will default to the name set for the mapping
                        is_bundle: false
                    gedmo_translator:
                        type: annotation
                        prefix: Gedmo\Translator\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Translator/Entity"
                        alias: GedmoTranslator # (optional) it will default to the name set for the mapping
                        is_bundle: false
                    gedmo_loggable:
                        type: annotation
                        prefix: Gedmo\Loggable\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Loggable/Entity"
                        alias: GedmoLoggable # (optional) it will default to the name set for the mappingmapping
                        is_bundle: false
                    gedmo_tree:
                        type: annotation
                        prefix: Gedmo\Tree\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Tree/Entity"
                        alias: GedmoTree # (optional) it will default to the name set for the mapping
                        is_bundle: false
                    tree:
                        type: annotation
                        alias: Gedmo
                        prefix: Gedmo\Tree\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Tree/Entity"

                filters:
                    softdeleteable:
                        class: Gedmo\SoftDeleteable\Filter\SoftDeleteableFilter
                        enabled: true
                    softdeleteabletrash:
                        class: Compo\Sonata\AdminBundle\Filter\SoftDeleteableTrashFilter
                        enabled: false

doctrine_cache:
    providers:
        annotation_cache:
            type: "%cache_driver%"
        sylius_settings:
            type: "%cache_driver%"

doctrine_migrations:
   dir_name: "%kernel.root_dir%/migrations"

stof_doctrine_extensions:
    orm:
        default:
            sortable:      true
            timestampable: true
            blameable: true
            sluggable: true
